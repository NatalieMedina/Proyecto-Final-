import java.io.*;
import java.net.*;
import java.util.*;


public class Client{


    static String HOST;
    static int PUERTO;
    Socket sc;
    DataOutputStream salida;
    DataInputStream entrada;
    String mensajeRecibido;
 
    public void initCliente(String HOST, int PUERTO){
        Scanner teclado = new Scanner(System.in);
        try{
            sc = new Socket(HOST, PUERTO);
            salida = new DataOutputStream(sc.getOutputStream());
            entrada = new DataInputStream(sc.getInputStream());
            String msn = "";
            
            while(!msn.equals("x")){

                //System.out.println("")
                System.out.println("Escriba un comando para enviar");
                msn = teclado.nextLine();
                salida.writeUTF(msn);//enviamos mensaje
                mensajeRecibido = entrada.readUTF();//Leemos respuesta
                System.out.println(mensajeRecibido);
                if(mensajeRecibido.equals("OK LOGOUT")){
                  Pruebas email= new Pruebas("OK LOGOUT");
                  email.setVisible(true);
        
                    System.out.println("Se cerro la conexion");
                    msn="x";

                }else if(mensajeRecibido.equals("OK LOGIN")){
                  Pruebas pruebas = new Pruebas("OK LOGIN");
                

                }
                else if(mensajeRecibido.equals("OK LOGOUT")){
                  Pruebas pruebas=new Pruebas("OK LOGOUT");

                }else if(mensajeRecibido.equals("OK CLIST")){
                  Pruebas pruebas=new Pruebas("OK CLIST");
                }else if(mensajeRecibido.equals("OK NEWMAILS")){
                  Pruebas pruebas=new Pruebas("OK NEWMAILS");

                }else if(mensajeRecibido.equals("OK SEND MAIL")){
                  Pruebas pruebas=new Pruebas("OK SEND MAIL");

                }else if(mensajeRecibido.equals("OK NEWCONT")){
                  Pruebas pruebas=new Pruebas("OK NEWCONT");

 
                }
             
            sc.close();
 
        }
    }catch(Exception e){
        }
      }
 
    public static void main(String[] args){

             /*String HOST = "192.168.43.205";
                int PUERTO = 7000;
                Client o = new Client();
                o.initCliente(HOST,PUERTO);

        Pruebas email= new Pruebas();
            email.setVisible(true);
            */
                
          Scanner teclado = new Scanner(System.in);
          System.out.println("Ingrese correo de la forma username@servername: ");
           String mensajeRecibido = teclado.nextLine();
          int l= (mensajeRecibido.length());
           String ncorreo=mensajeRecibido.substring(6,l);
          Scanner correo = new Scanner(ncorreo);
         correo.useDelimiter("[@]");
         String username = correo.next();
         String servername = correo.next();
         // if(username.equals("servername")){
           // System.out.println(" "+username);
            System.out.println(" "+servername);
               //El usuario esta en la tabla?     
              //definir una variable de la ip del servidor y una para el puerto
                String HOST = "192.168.1.30";
                int PUERTO = 5357;
                Client o = new Client();
                o.initCliente(HOST,PUERTO);
           // }
          //else{System.out.println("ERROR 100 UNKNOWN SERVER");}
                

    }
 
}
